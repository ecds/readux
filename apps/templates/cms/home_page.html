{% extends "base.html" %}
{% load static %}
{% load readux_templatetags %}

{% block content %}
<h1>{{page.title}}</h1>
<p class="lead">{{page.tagline}}</p>

{% if page.featured_collections.all|length != 0  %}
<h2>Featured Collection{{page.featured_collections.all|length|pluralize}}</h2>
<ol>
  {% for collection in page.featured_collections.all|order_by:page.featured_collections_sort_order %}
  <li>
    <div>
      <img src="media/{{collection.thumbnail}}" alt="Thumbnail image for collection {{collection.label}}"/><br/>
        <a class="nav-link" href="{% url 'collection' collection.pid %}">
          {{ collection.label }}
        </a>
        {{collection.manifests.all|length}} volume{{collection.manifests.all|length|pluralize}}
    </div>
  </li>
  {% endfor %}
</ol>
{% endif %}

{% if page.featured_volumes.all|length != 0 %}
<h2>Featured Volume{{page.featured_volumes.all|length|pluralize}}</h2>
<ol>
    {% for volume in page.featured_volumes.all|order_by:page.featured_volumes_sort_order %}
<<<<<<< HEAD
  <li class="list">
    <div><div id="grid"><div id="grid-image-volume">
      <a class="nav-link" href="{% url 'page' volume.pid volume.canvas_set.first.pid %}">
        {% for canvas in volume.canvas_set.all %}{% if canvas.is_starting_page == 1 %}<img src="{{ canvas.thumbnail }}" {% elif forloop.last %}<img src="{{ volume.canvas_set.first.thumbnail }}"{% endif %}{% endfor %} alt="First page of {{volume.label}}" onerror="this.onerror=null;this.src='{% static 'images/image_not_found.jpg' %}';"/>
      </a></div><div id="grid-metaforimage">
      <p>
      <a class="nav-link" href="{% url 'page' volume.pid volume.canvas_set.first.pid %}">
=======
  <li>
    <div>{% for col in volume.collections.all %}
      <a class="nav-link" href="{% url 'page' volume.pid volume.canvas_set.first.pid %}">
        <img src="{{ volume.canvas_set.first.thumbnail_crop_landscape }}" alt="First page of {{volume.label}}" onerror="this.onerror=null;this.src='{% static 'images/image_not_found.jpg' %}';"/>
      </a>
      <p>
      <a class="nav-link" href="{% url 'page' volume.pid volume.canvas_set.first.pid %}">{% endfor %}
>>>>>>> removing <collection> from volume and page url

      <p>{{ volume.label|truncatechars:200 }}</p>
  </a><br/>
  Author: {{volume.author|truncatechars:100}}<br/>
  Date Published: {{volume.published_date}}<br/>
  Added {{volume.created_at}}</p>
    </div></div></div>
  </li>
  {% endfor %}
</ol>
{% endif %}

{% if page.content_display == 'Collections' %}
<h2>All Collections</h2>
<ul>
  {% for collection in page.collections %}
  <li>
    <div class="collectioncontainer">
      <img src="media/{{collection.header}}" alt="Banner image for collection {{collection.label}}" style="width:100%;"/><br />
        <a class="nav-link" href="{% url 'collection' collection.pid %}">
          {{ collection.label }}
        </a>
        {{collection.manifests.all|length}} volume{{collection.manifests.all|length|pluralize}}
    </div>
  </li>
  {% endfor %}
</ul>
{% endif %}

{% if page.content_display == 'Volumes' %}
<h2>All Volumes</h2>
<ol>
  {% for volume in page.volumes %}
<<<<<<< HEAD
  <li class="list">
    <div><div id="grid"><div id="grid-image-volume">
      <a class="nav-link" href="{% url 'page' volume.pid volume.canvas_set.first.pid %}">
        {% for canvas in volume.canvas_set.all %}{% if canvas.is_starting_page == 1 %}<img src="{{ canvas.thumbnail }}" {% elif forloop.last %}<img src="{{ volume.canvas_set.first.thumbnail }}"{% endif %}{% endfor %}alt="First page of {{volume.label}}" onerror="this.onerror=null;this.src='{% static 'images/image_not_found.jpg' %}';"/>
      </a></div><div id="grid-metaforimage">
      <p>
      <a class="nav-link" href="{% url 'page' volume.pid volume.canvas_set.first.pid %}">
      <p>{{ volume.label|truncatechars:200 }}</p>
  </a>
  Author: {{volume.author|truncatechars:150}}<br/>
  Date Published: {{volume.published_date}}<br/>
  Added {{volume.created_at}}</p></div>
    </div></div>
=======
  <li>
    <div>{% for col in volume.collections.all %}
      <a class="nav-link" href="{% url 'page' volume.pid volume.canvas_set.first.pid %}">
        <img src="{{ volume.canvas_set.first.thumbnail_crop_landscape }}" alt="First page of {{volume.label}}" onerror="this.onerror=null;this.src='{% static 'images/image_not_found.jpg' %}';"/>
      </a>
      <p>
      <a class="nav-link" href="{% url 'page' volume.pid volume.canvas_set.first.pid %}">{% endfor %}
      <p>{{ volume.label }}</p>
  </a></p>
  <p>Author: {{volume.author}}</p>
  <p>Date Published: {{volume.published_date}}</p>
  <p>Added {{volume.created_at}}</p>
    </div>
>>>>>>> removing <collection> from volume and page url
  </li>
  {% endfor %}
</ol>
{% endif %}

{% endblock %}
