{% extends "base.html" %}
{% load wagtailcore_tags static %}

{% block extra_head %}
    <meta property="og:title" content="Readux - Search" />
    <meta name="twitter:title" content="Readux - Site Search" />
    <meta
        property="og:image"
        content="https://{{ request.META.HTTP_HOST }}/apps/static/images/readux_logo.jpg"
    />
    <meta
        property="og:description"
        content="Search Readux volumes"
    />
    <meta
        name="twitter:description"
        content="Search Readux volumes"
    />
{% endblock %}
{% block body_class %}template-homepage{% endblock %}

{% block content %}
    <h1 class="uk-heading-medium uk-text-center">Search</h1>
    <p class="uk-text-lead uk-text-center">Search and filter all volumes.</p>

    <div>
        <form
            id="search-form"
            class="uk-form uk-form-stacked uk-width-1-1"
            action="{% url 'search' %}"
            method="get"
            accept-charset="utf-8"
        >
            <fieldset class="uk-margin uk-width-1-1">
                <div class="uk-inline uk-width-1-1">
                    <span class="uk-form-icon" uk-icon="icon: search" aria-label="search"></span>
                    {{ form.q }}
                </div>
                <span class="uk-text-small">
                    Search for individual whole keywords. Multiple words will be searched as
                    'or' (e.g. Rome London = Rome or London). Stopwords (e.g. in, the) will be
                    dropped.
                </span>
            </fieldset>
            <fieldset class="uk-margin uk-flex two-column">
                <div class="uk-width-1-2">
                    <div class="uk-form-label">{{ form.author.label }}</div>
                    {{ form.author }}
                </div>
                <div class="uk-width-1-2">
                    <div class="uk-form-label">{{ form.language.label }}</div>
                    {{ form.language }}
                </div>
                <span class="uk-text-small">
                    Hold down “Control”, or “Command” on a Mac, to select more than one, or to deselect a selected item. Selecting multiple options will include all results matching any of the options.
                </span>
            </fieldset>
            <fieldset class="uk-margin uk-width-1-1">
                <button class="uk-button uk-button-default" type="submit">
                    Search
                </button>
            </fieldset>
        </form>
    </div>
    <div class="uk-flex uk-flex-center uk-margin">
        {{ volumes.count }} result{{ volumes.count|pluralize }}
    </div>
    <div class="uk-flex uk-flex-center">
        {% include "snippets/pagination.html" %}
    </div>
    <ol class="uk-flex uk-flex-column uk-width-1-1@m uk-list-divider" id="search-results">
        {% for volume in volumes %}
            {% include "snippets/volume_result.html" %}
        {% endfor %}
    </ol>
    <div class="uk-flex uk-flex-center">
        {% include "snippets/pagination.html" %}
    </div>

{% endblock content %}
